<?xml version="1.0" encoding="UTF-8"?>
<component name="org.nuxeo.platform.birt.reporting.actions">

  <require>org.nuxeo.ecm.platform.preview.actions</require>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService" point="actions">

    <action id="TAB_BIRT_PREVIEW" link="/incl/tabs/birt_preview.xhtml"
      enabled="true" order="200" label="label.document.preview">
      <category>VIEW_ACTION_LIST</category>
      <filter-id>view_preview_report</filter-id>
    </action>
  </extension>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService" point="filters">
    <filter id="view_preview_report">
      <rule grant="true">
        <permission>Read</permission>
        <type>BirtReport</type>
      </rule>
    </filter>

    <filter id="view_preview" append="true">
      <rule grant="false">
        <type>BirtReport</type>
        <type>BirtReportModel</type>
      </rule>
    </filter>
  </extension>

</component>
